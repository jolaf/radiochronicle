#summary One-sentence summary of this page.

= Хроники радиопереговоров =
Глобальная задача — сделать так, чтобы радиопереговоры с игры не канули в Лету. 

Задача делится на две
  *  сохранить всё, что было сказано в эфир
  *  понять, что с этим счастьем делать

== Общая структура проекта ==
Проект пишется в виде набора самостоятельных скриптов на питоне. Пока видится необходимость в следующих скриптах:
  *  прослшивание эфира, отображение громкости. Используется для калибровки системы для конкретного полигона: запускаем при тишине в эфере, смотрим уровень сигнала; запускаем, когда вещает рация где-то на краю полигона, опять смотрим уровень. По этим уровням определяем пороговое значение сигнала, отделяющее шум от переговоров.
  *  прослушивание эфира в бесконечном цикле, запись всего того, что не является тишиной
  *  монтаж результатов.

== Измерение уровня шумов ==
Тут всё более менее ясно, хотя возможны детали в плане того, как именно реализуется интерфейс.

== Запись переговоров ==
Звуковой поток обрабтыватся по мере его поступления, порциями по 2кб.
Как только попадается что-то интересное, начинаем сохранять данные,
начиная с этой самой порции, так что ничего не теряется.
После наступления тишины ждем какое-то время, и если передача не
возобновилась, то скидываем содержимое памяти в файл. Таким образом, в
конце у каждого файла оказывается хвостик тишины (по умолчанию - 2
секунды), тишина в начале трека исчезающе малая (в пределах 24мс)

*на дороботку*: Как только мы начинаем отсчет тишины, запоминаем длину массивы данных. Когда отведенное время вышло, записываем в файл только значимую часть потока, без лишних секунд тишины в конце. Таким образом тишана в конце трека также будет не более одного фрейма.

== Монтаж результатов ==
Рабочиая концепция: собираем все треки вместе, в видеоряд выводим информацию о текущем времени, и информацию о паузах между треками

*на обдумать*:
  *  если между треками пауза достаточно короткая, например, секунд 10, то паузу между ними стоит оставлять, а текстовую отбивку не делать. А если пауза большая, то её надо заменть не на нулевой интервал, а на те же самые ~10 секунд, за которые реально прочитать ту самую текстовую отбивку типа "прошло 20 минут"
  *  видимо, всю инфу надо рисовать в области субтиторов, чтобы сверху можно было вставить фотографий и иже с ними в процессе ручного монтажа